<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    
    <link rel="canonical" href="http://www.lx326.com/2021/02/07/StoryBook6-0/">
    
    
    <title>StoryBook6.0 | LDY&#39;s  Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="组件化工具">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.css">
    <link rel="stylesheet" href="/css/style.css?v=1.4.4">
    
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
            v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}'),
            g: JSON.parse('{"enable":false,"lazy":true,"owner":"LXX7473","repo":"gitment","oauth":{"client_id":null,"client_secret":null},"perPage":10}'),
            d: JSON.parse('{"app_id":null}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
    
</head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/headhead.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">李杜洋</h5>
          <a href="mailto:LXX7473@163.com" title="LXX7473@163.com" class="mail">
            
              <span>L</span>
            
              <span>X</span>
            
              <span>X</span>
            
              <span>7</span>
            
              <span>4</span>
            
              <span>7</span>
            
              <span>3</span>
            
              <span>@</span>
            
              <span>1</span>
            
              <span>6</span>
            
              <span>3</span>
            
              <span>.</span>
            
              <span>c</span>
            
              <span>o</span>
            
              <span>m</span>
            
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/LXX7473" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                HOME
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                CATEGORIES
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                TAGS
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                ARCHIVES
              </a>
            </li>
        
            <li class="">
              <a href="/custom"  >
                <i class="icon icon-lg icon-plus-square"></i>
                CUSTOM
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>StoryBook6.0</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg">
    <div class="container fade-scale">
        <h1 class="title">StoryBook6.0</h1>
        <h5 class="subtitle">
            
                <time datetime="2021-02-07T13:16:15.000Z" itemprop="datePublished" class="page-time">
  2021-02-07
</time>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-StoryBook6-0"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">StoryBook6.0</h1>
        <div class="post-meta">
            <time class="post-time" title="2021-02-07 21:16:15" datetime="2021-02-07T13:16:15.000Z"  itemprop="datePublished">2021-02-07</time>

            


            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <h2 id="组件化开发常见的问题"><a href="#组件化开发常见的问题" class="headerlink" title="组件化开发常见的问题"></a>组件化开发常见的问题</h2><p>无论你使用<code>React</code>还是<code>Vue</code>进行项目开发，都一定都会封装出各种各样的组件，这些组件将一个完整的页面分成若干份，让整体的代码看起来更加清晰易读</p>
<p>随着项目越来越复杂，你可能会写出很多好用的公共组件，但这些组件往往都被引入在复杂的页面结构中，使其没有办法清晰的展示给其他的协同开发人员，所以我们总会看到一个组件在项目中被实现了一遍又一遍。而这种情况在B端系统中尤为常见</p>
<p>在平时常见的脚手架（React，Vue）搭建的项目中，并没有可以单独展示组件的入口，所以如何把项目中的公共组件进行优雅的展示，成为一个值得讨论的问题。</p>
<h2 id="StoryBook"><a href="#StoryBook" class="headerlink" title="StoryBook"></a>StoryBook</h2><p><code>StoryBook</code>是目前最受欢迎的 组件可视化展示平台 ,自上线以来就一直被广大开发者青睐。可以为目前大部分框架提供结构化的UI开发和文档。</p>
<p>2020年8月，<code>StoryBook</code>又推出了6.0版本（几乎完全向后兼容5.X.），本次的改动大大的加强了它的使用体验。有以下几个方面：</p>
<ol>
<li>零配置设置</li>
<li>新一代的故事格式</li>
<li>实时编辑，无需代码</li>
</ol>
<h2 id="安装初始化storyBook"><a href="#安装初始化storyBook" class="headerlink" title="安装初始化storyBook"></a>安装初始化storyBook</h2><p>如果你想在已有的项目中引入<code>StoryBook</code>，那直接去情况二就好，如果你想创建一个新的项目，那么请选择情况一</p>
<h4 id="情况一：新项目中生成StoryBook"><a href="#情况一：新项目中生成StoryBook" class="headerlink" title="情况一：新项目中生成StoryBook"></a>情况一：新项目中生成StoryBook</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 创建组件库目录</span><br><span class="line">mkdir storybook-project</span><br><span class="line"></span><br><span class="line"># 进入项目</span><br><span class="line">cd storybook-project</span><br><span class="line"></span><br><span class="line"># 初始化storybook</span><br><span class="line">npx sb init</span><br><span class="line"></span><br><span class="line">==这时会进行提示==</span><br><span class="line"></span><br><span class="line"># 你是否要手动选择要安装的storybook项目类型？</span><br><span class="line">Do you want to manually choose a Storybook project type to install? y/n</span><br><span class="line"></span><br><span class="line">选择y</span><br><span class="line"></span><br><span class="line"># 下一步选择项目类型：react（以react为例）</span><br><span class="line"> Please choose a project type <span class="keyword">from</span> the following list:</span><br><span class="line"></span><br><span class="line">选择react</span><br><span class="line">--------------------------------------------------</span><br><span class="line"># 当然，</span><br><span class="line">你也可以在初始化的时候直接指定好项目类型：</span><br><span class="line"></span><br><span class="line">npx sb init --type react</span><br></pre></td></tr></table></figure>

<h5 id="注意"><a href="#注意" class="headerlink" title="== 注意 =="></a>== 注意 ==</h5><p>以<code>React</code>为例，假如你的新项目还没有安装过除<code>StoryBook</code>之外任何依赖，你需要安装你选择的框架类型所对应的相关依赖包。否则<code>StoryBook</code>会因为找不到这些依赖而导致报错</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install react react-dom --save</span><br></pre></td></tr></table></figure>

<h4 id="情况二：已有的项目中引入StoryBook"><a href="#情况二：已有的项目中引入StoryBook" class="headerlink" title="情况二：已有的项目中引入StoryBook"></a>情况二：已有的项目中引入StoryBook</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#先进入到已有项目的目录,执行</span><br><span class="line"></span><br><span class="line">npx sb init</span><br><span class="line"></span><br><span class="line"># 例如当前的项目是Vue、React、框架搭建的， storybook 会自动检测项目类型并进行初始化！！</span><br></pre></td></tr></table></figure>

<p>自StoryBook6.0起，<code>.storybook</code>的文件夹里面只有两个文件，并且已经默认配置好<code>add-docs (配置文档)</code>、<code>addon-info(自动化)</code>等常用的功能（6.0之前的版本都需要安装对应的依赖，并进行配置，很繁琐！！！）</p>
<h2 id="运行storyBook"><a href="#运行storyBook" class="headerlink" title="运行storyBook"></a>运行storyBook</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run storybook</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">yarn storybook</span><br></pre></td></tr></table></figure>

<p>到这里你应该已经成功的运行起来<code>StoryBook</code>了，接下来介绍一些 <code>StoryBook</code>中常用的操作</p>
<h2 id="编写StoryBook"><a href="#编写StoryBook" class="headerlink" title="编写StoryBook"></a>编写StoryBook</h2><p>== 以默认初始化好的Button组件为例~ ==</p>
<ol>
<li>首先你需要创建一个以<code>.stories.js</code>或者<code>.stories.tsx</code>结尾的文件（运行StoryBook的时候，会自动匹配后缀名）</li>
<li>然后在这个文件中引入你写好的组件</li>
<li>接下来就是编写组件的<code>StoryBook</code></li>
</ol>
<p>基本代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Button.stories.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="comment">//导入你写好的组件</span></span><br><span class="line"><span class="keyword">import</span> Button <span class="keyword">from</span> <span class="string">'xxxx'</span></span><br><span class="line"><span class="comment">//创建模板</span></span><br><span class="line"><span class="keyword">const</span> Template = <span class="function">(<span class="params">args</span>) =&gt;</span> &lt;Button &#123;...args&#125; /&gt;;</span><br><span class="line">//导出被展示的组件</span><br><span class="line">export const Primary = Template.bind(&#123;&#125;);</span><br><span class="line">//为该组件设置参数</span><br><span class="line">Primary.args = &#123;</span><br><span class="line">  //组件需要接受的属性</span><br><span class="line">  primary: true,</span><br><span class="line">  label: 'Primary',</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>这时组件就会被成功的展示：</p>
<figure class="image-box">
                <a rel=StoryBook6.0 href="/Users/koolearn/Library/Application" title="Support/typora-user-images/image-20210203100835369.png" data-fancybox="images"><img src="/Users/koolearn/Library/Application" alt="image-20210203100835369" title="Support/typora-user-images/image-20210203100835369.png" class></a>
                <p>Support/typora-user-images/image-20210203100835369.png</p>
            </figure>

<h3 id="故事页中组件的基本配置以及常见操作："><a href="#故事页中组件的基本配置以及常见操作：" class="headerlink" title="故事页中组件的基本配置以及常见操作："></a>故事页中组件的基本配置以及常见操作：</h3><p>下列代码主要涉及几个属性的配置</p>
<ul>
<li>title：设置左边的菜单栏，展示组件的名称</li>
<li>component:需要展示的组件</li>
<li>argTypes：对一些特定的属性进行特殊的配置</li>
<li>decorators：为组件添加样式</li>
</ul>
<p>如何生成一个新的展示页？</p>
<p>每导出一个新的组件，StoryBook就会为你重新创建一个展示页面（如下图）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Button.stories.js</span></span><br><span class="line"># 我们可以在这个对象中对本故事页进行配置，在该对象中配置过的属性会在该组件的整个故事页中生效</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  # Example是该组件的一级标题名称，Button是该组件的二级标题名称</span><br><span class="line">  title: <span class="string">'Example/Button'</span>,</span><br><span class="line">  # Button需要展示的组件</span><br><span class="line">  component: Button,</span><br><span class="line">  ,</span><br><span class="line">  # 为背景色添加颜色控制器（这是storybook自带的颜色选择器）</span><br><span class="line"> argTypes: &#123;</span><br><span class="line">    backgroundColor: &#123; <span class="attr">control</span>: <span class="string">'color'</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  # 装饰器，修饰组件的样式</span><br><span class="line">  decorators: [<span class="function">(<span class="params">Story</span>) =&gt;</span> &lt;div style=&#123;&#123; margin: '3em' &#125;&#125;&gt;&lt;Story/&gt;&lt;/div&gt;]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> Template = <span class="function">(<span class="params">args</span>) =&gt;</span> &lt;Button &#123;...args&#125; /&gt;;</span><br><span class="line"># 每次导出都会重新创建一个展示页</span><br><span class="line">export const Primary = Template.bind(&#123;&#125;);</span><br><span class="line"># 每次导出都会重新创建一个展示页，</span><br><span class="line">export const second=Template.bind(&#123;&#125;);</span><br><span class="line"></span><br><span class="line"># 可以通过修改storyName的方式为组件改名（中文也可以）</span><br><span class="line">second.storyName='Secondary'</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<figure class="image-box">
                <a rel=StoryBook6.0 href="https://gitee.com/lxx7473/images/raw/master/img/config-story.png" title="image-20210203110400190" data-fancybox="images"><img src="https://gitee.com/lxx7473/images/raw/master/img/config-story.png" alt="image-20210203110400190" title class></a>
                <p>image-20210203110400190</p>
            </figure>

<h3 id="Args"><a href="#Args" class="headerlink" title="Args"></a>Args</h3><p>每个组件都需要传入一些属性用来切换组件的不同状态，</p>
<h3 id="Decorators"><a href="#Decorators" class="headerlink" title="Decorators"></a>Decorators</h3><p><code>Decorators</code>可以对你要展示的组件进行装饰，修改每个故事中的组件的样式，比如让组件居中，左对齐等等。</p>
<p>基本用法如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Button.stories.tsx</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  component: Button,</span><br><span class="line">  decorators: [<span class="function">(<span class="params">Story</span>) =&gt;</span> &lt;div style=&#123;&#123; margin: '3em' &#125;&#125;&gt;&lt;Story/&gt;&lt;/div&gt;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>展示：</p>
<figure class="image-box">
                <a rel=StoryBook6.0 href="https://gitee.com/lxx7473/images/raw/master/img/storybook.png" title="image-20210203102246168" data-fancybox="images"><img src="https://gitee.com/lxx7473/images/raw/master/img/storybook.png" alt="image-20210203102246168" title class></a>
                <p>image-20210203102246168</p>
            </figure>

<h5 id="注意-1"><a href="#注意-1" class="headerlink" title="== 注意 =="></a>== 注意 ==</h5><p>这种配置方式会作用于<code>Button.stories.tsx</code>下所有的<code>Button</code></p>
<p>当然我们也可以对某个组件进行单独配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  title: <span class="string">'Example/Button'</span>,</span><br><span class="line">  component: Button,</span><br><span class="line">  argTypes: &#123;</span><br><span class="line">    backgroundColor: &#123; <span class="attr">control</span>: <span class="string">'color'</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"># 模板1</span><br><span class="line"><span class="keyword">const</span> Template1 = <span class="function">(<span class="params">args</span>) =&gt;</span> &lt;div style=&#123;&#123;margin:'3em'&#125;&#125;&gt;&lt;Button &#123;...args&#125; /&gt;&lt;/div&gt;;</span><br><span class="line"># 模板2</span><br><span class="line">const Template2 = (args) =&gt; &lt;div &gt;&lt;Button &#123;...args&#125; label=&#123;'button'&#125;/&gt;&lt;/div&gt;;</span><br><span class="line"></span><br><span class="line">export const Primary = Template1.bind(&#123;&#125;);</span><br><span class="line">Primary.args = &#123;</span><br><span class="line">  primary: true,</span><br><span class="line">  label: 'Button',</span><br><span class="line">&#125;;</span><br><span class="line">export const second = Template2.bind(&#123;&#125;);</span><br></pre></td></tr></table></figure>

<p>Primary组件样式已经被改变</p>
<figure class="image-box">
                <a rel=StoryBook6.0 href="/Users/koolearn/Library/Application" title="Support/typora-user-images/image-20210203112425437.png" data-fancybox="images"><img src="/Users/koolearn/Library/Application" alt="image-20210203112425437" title="Support/typora-user-images/image-20210203112425437.png" class></a>
                <p>Support/typora-user-images/image-20210203112425437.png</p>
            </figure>

<p>Second组件样式未被改变</p>
<figure class="image-box">
                <a rel=StoryBook6.0 href="https://gitee.com/lxx7473/images/raw/master/img/moban.png" title="image-20210203112804191" data-fancybox="images"><img src="https://gitee.com/lxx7473/images/raw/master/img/moban.png" alt="image-20210203112804191" title class></a>
                <p>image-20210203112804191</p>
            </figure>



<h3 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h3><p>通常用于控制Storybook功能和插件的行为。例如，我们通过参数自定义背景插件。</p>
<p>在单个故事页中设置parameters</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Button.story.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Primary = Template.bind(&#123;&#125;);</span><br><span class="line">Primary.args = &#123;</span><br><span class="line">  primary: <span class="literal">true</span>,</span><br><span class="line">  label: <span class="string">'Button'</span>,</span><br><span class="line">&#125;;</span><br><span class="line">Primary.parameters = &#123;</span><br><span class="line">  backgrounds: &#123;</span><br><span class="line">    values: [</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'red'</span>, <span class="attr">value</span>: <span class="string">'#f00'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'green'</span>, <span class="attr">value</span>: <span class="string">'#0f0'</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>也在全局中设置parameters</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .storybook/preview.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> parameters = &#123;</span><br><span class="line">  backgrounds: &#123;</span><br><span class="line">    values: [</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'red'</span>, <span class="attr">value</span>: <span class="string">'#f00'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'green'</span>, <span class="attr">value</span>: <span class="string">'#0f0'</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>展示：</p>
<figure class="image-box">
                <a rel=StoryBook6.0 href="https://gitee.com/lxx7473/images/raw/master/img/bg-storybook.png" title="image-20210203143450841" data-fancybox="images"><img src="https://gitee.com/lxx7473/images/raw/master/img/bg-storybook.png" alt="image-20210203143450841" title class></a>
                <p>image-20210203143450841</p>
            </figure>



<h2 id="StoryBook中的Doc-文档-配置"><a href="#StoryBook中的Doc-文档-配置" class="headerlink" title="StoryBook中的Doc(文档)配置"></a>StoryBook中的Doc(文档)配置</h2><p><code>DocsPage</code>是零配置的默认文档，它将您的组件，文本描述，args表，代码示例，统一展示到<code>Doc</code>页面中，自动生成如图：</p>
<figure class="image-box">
                <a rel=StoryBook6.0 href="https://gitee.com/lxx7473/images/raw/master/img/20210203155030.png" title="image-20210203154951177" data-fancybox="images"><img src="https://gitee.com/lxx7473/images/raw/master/img/20210203155030.png" alt="image-20210203154951177" title class></a>
                <p>image-20210203154951177</p>
            </figure>

<p>当然如果默认的<code>doc</code>文档不能满足你所预期的时候，你也可以对该<code>doc</code>结构进行配置，不过官方的建议是：希望每个组件都有自己的文档和故事集。</p>
<h2 id="Doc中的常见配置"><a href="#Doc中的常见配置" class="headerlink" title="Doc中的常见配置"></a>Doc中的常见配置</h2><h3 id="page"><a href="#page" class="headerlink" title="page"></a>page</h3><p>我们可以通过设置<code>docs.page</code>的值来改变<code>doc</code>文档的结构。当<code>page</code>值为<code>null</code>的时候。</p>
<p><strong>组件层</strong></p>
<p>作用范围：<code>Primary</code>组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//文件路径</span></span><br><span class="line"><span class="comment">// Button.stories.js | Button.stories.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Primary = Template.bind(&#123;&#125;);</span><br><span class="line">Primary.parameters = &#123; <span class="attr">docs</span>: &#123; <span class="attr">page</span>: <span class="literal">null</span> &#125; &#125;</span><br></pre></td></tr></table></figure>

<p><strong>故事层</strong></p>
<p>作用范围：该文件下的组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//文件路径</span></span><br><span class="line"><span class="comment">// Button.stories.js | Button.stories.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Button &#125; <span class="keyword">from</span> <span class="string">'./Button'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  title: <span class="string">'Button'</span>,</span><br><span class="line">  component: Button,</span><br><span class="line">  parameters: &#123; </span><br><span class="line">    docs: &#123; </span><br><span class="line">      page: <span class="literal">null</span> </span><br><span class="line">    &#125; </span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>全局层</strong></p>
<p>作用范围：所有以<code>stories.js||stories.jsx||stories.tsx</code>结尾的文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//文件路径</span></span><br><span class="line"><span class="comment">// .storybook/preview.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> parameters = &#123; <span class="attr">docs</span>: &#123; <span class="attr">page</span>: <span class="literal">null</span> &#125; &#125;;</span><br></pre></td></tr></table></figure>

<p>效果如图：</p>
<figure class="image-box">
                <a rel=StoryBook6.0 href="https://gitee.com/lxx7473/images/raw/master/img/20210203155502.png" title="image-20210203155502431" data-fancybox="images"><img src="https://gitee.com/lxx7473/images/raw/master/img/20210203155502.png" alt="image-20210203155502431" title class></a>
                <p>image-20210203155502431</p>
            </figure>

<p>通过修改<code>page</code>属性我们也可以<code>doc</code>的结构进行配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//.Button.stories.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">     Title,</span><br><span class="line">     Subtitle,</span><br><span class="line">     Description,</span><br><span class="line">     Primary,</span><br><span class="line">     ArgsTable,</span><br><span class="line">     Stories,</span><br><span class="line">     PRIMARY_STORY,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'@storybook/addon-docs/blocks'</span> </span><br><span class="line"><span class="comment">//.....</span></span><br><span class="line">parameters: &#123;</span><br><span class="line">        docs: &#123;</span><br><span class="line">            page: <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">                &lt;&gt;</span><br><span class="line">              <span class="comment">//大标题</span></span><br><span class="line">                 &lt;Title /&gt;</span><br><span class="line">              <span class="comment">//小标题</span></span><br><span class="line">                 &lt;Subtitle /&gt; </span><br><span class="line">              <span class="comment">//描述</span></span><br><span class="line">                  &lt;Description /&gt; </span><br><span class="line">              <span class="comment">//被展示的组件</span></span><br><span class="line">                   &lt;Stories includePrimary=&#123;<span class="literal">true</span>&#125; title=<span class="string">''</span> /&gt;</span><br><span class="line">              <span class="comment">//组件的属性列表</span></span><br><span class="line">                    &lt;ArgsTable story=&#123;PRIMARY_STORY&#125; /&gt;</span><br><span class="line">                &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">            ),</span></span><br><span class="line"><span class="regexp">        &#125;,</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br></pre></td></tr></table></figure>


        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        

        
        转载注明出处，原文地址：<a href="/2021/02/07/StoryBook6-0/" target="_blank" rel="external">http://yoursite.com/2021/02/07/StoryBook6-0/</a>
        
    </div>
    <footer>
        <a href="http://yoursite.com">
            <img src="/img/headhead.jpg" alt="李杜洋">
            李杜洋
        </a>
    </footer>
</blockquote>

        
            <div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>

            
        
        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/组件化工具/">组件化工具</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://yoursite.com/2021/02/07/StoryBook6-0/&title=《StoryBook6.0》 — LDY's  Blog&pic=http://yoursite.com/img/headhead.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://yoursite.com/2021/02/07/StoryBook6-0/&title=《StoryBook6.0》 — LDY's  Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            


        
    </div>
    
<nav class="post-nav flex-row flex-justify-between flex-row-reverse">
  

  
    <div class="next">
      <a href="/2020/11/30/你可能不知道的Set和WeakSet/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">你可能不知道的Set和WeakSet</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>目录</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#组件化开发常见的问题"><span class="post-toc-number">1.</span> <span class="post-toc-text">组件化开发常见的问题</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#StoryBook"><span class="post-toc-number">2.</span> <span class="post-toc-text">StoryBook</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安装初始化storyBook"><span class="post-toc-number">3.</span> <span class="post-toc-text">安装初始化storyBook</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#情况一：新项目中生成StoryBook"><span class="post-toc-number">3.0.1.</span> <span class="post-toc-text">情况一：新项目中生成StoryBook</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#情况二：已有的项目中引入StoryBook"><span class="post-toc-number">3.0.2.</span> <span class="post-toc-text">情况二：已有的项目中引入StoryBook</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#运行storyBook"><span class="post-toc-number">4.</span> <span class="post-toc-text">运行storyBook</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#编写StoryBook"><span class="post-toc-number">5.</span> <span class="post-toc-text">编写StoryBook</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#故事页中组件的基本配置以及常见操作："><span class="post-toc-number">5.1.</span> <span class="post-toc-text">故事页中组件的基本配置以及常见操作：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Args"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">Args</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Decorators"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">Decorators</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Parameters"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">Parameters</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#StoryBook中的Doc-文档-配置"><span class="post-toc-number">6.</span> <span class="post-toc-text">StoryBook中的Doc(文档)配置</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Doc中的常见配置"><span class="post-toc-number">7.</span> <span class="post-toc-text">Doc中的常见配置</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#page"><span class="post-toc-number">7.1.</span> <span class="post-toc-text">page</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>

    <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        我们一起来让这个世界有趣一点
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/reward-wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/reward-wechat.png" data-alipay="/img/reward-alipay.png">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>

    

</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Links：</span>
    
    <span class="blogroll-item">
        <a href="https://lx326.com" target="_blank">HOME</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
        <p>
            <span>
                李杜洋 &copy; 2017 - 2022
            </span>
        		
           	
            
            
            <span>
	            Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
            </span>
            
            
            

            
                
<span class="site-uv" title="总访客量">
    <i class="icon icon-user"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_uv"></i>
</span>


<span class="site-pv" title="总访问量">
    <i class="icon icon-eye"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_pv"></i>
</span>

            
        </p>
    </div>
</footer>

    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://yoursite.com/2021/02/07/StoryBook6-0/&title=《StoryBook6.0》 — LDY's  Blog&pic=http://yoursite.com/img/headhead.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://yoursite.com/2021/02/07/StoryBook6-0/&title=《StoryBook6.0》 — LDY's  Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACEklEQVR42u3ay4rDMAwF0P7/T89sC8UzV5K7iH2yCiU0OhRU6/F6xdfP2/X+yeqZzyeTzz+f2XxhYGA8lpF83d+AnL0KdAMVAwPjAsYqlNX9BLzrGzAwMDCqjMmVvBcDAwMjYeRF7PwTDAwMjF4RmzfCkrA2t+QwMDCOZnwvrPn9V+YbGBgYj2L0Ss28TZYn0El5jIGBcTajN8LMMXnizkehy1IWAwPjUEZSpvZCTEKZvwsDA+MGRt5K640BkuAm40wMDIwbGMnBK3/BPOH2OmwYGBg3M3Yd8qqhJ0m5/I+BgYHxWEZyyOu1z6qDhA3FLQYGxtGMPPTe2GASaJmEgYFxKGO+GNFrwPXSevl3wMDAOIJRniTEzbg8cVcPjhgYGBi9ddVd9/nIAQMD4wbGPLjeOGFSMEfbIhgYGAcxJgPLpJU2GXZuuzAwMB7OqC5J9NJu3lBrJmIMDIyjGXno+RrrrmNleWUWAwPjGkY+sExePGm0lZM+BgbGBYzeYKC6TpFczUIaAwPjaEZ1PSJ5QW/lIi+GMTAw7mFMUmFedlYXvPJFMQwMjBsYu8aZzbIzbqthYGBgJEm2ysjXUrclXAwMjAsYeSh5c39e6ObjBwwMDIx8LSxv5feOlf/0CzEwMDCKQVST9aRgxsDAuIFRLWKrB8HqAbE8VMDAwDiaMSod822O+JiY/AGM5hsYGBhPYvwCl263PXJh/goAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="//cdn.bootcss.com/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.4.4"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.4.4"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.js"></script>

<script type="text/javascript" src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=1.4.4"></script>
<script type="text/javascript" src="/js/blog.js?v=1.4.4"></script>

<!-- third-party -->






<script type="text/javascript" src="/js/plugins/local_search.js?v=1.4.4"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



    
    





    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>







    
</body>
</html>
